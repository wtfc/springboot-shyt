
!function(d){var c=function(b,f){var e=/[^\w\-\.:]/.test(b)?new Function(c.arg+",tmpl","var _e=tmpl.encode"+c.helper+",_s='"+b.replace(c.regexp,c.func)+"';return _s;"):c.cache[b]=c.cache[b]||c(c.load(b));return f?e(f,c):function(g){return e(g,c)}};c.cache={},c.load=function(b){return document.getElementById(b).innerHTML},c.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,c.func=function(h,g,l,k,j,i){return g?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[g]||"\\"+g:l?"="===l?"'+_e("+k+")+'":"'+("+k+"==null?'':"+k+")+'":j?"';":i?"_s+='":void 0},c.encReg=/[<>&"'\x00]/g,c.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},c.encode=function(b){return(null==b?"":""+b).replace(c.encReg,function(e){return c.encMap[e]||""})},c.arg="o",c.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return c}):d.tmpl=c}(this);


!function(e){var d=function(b,l,k){var j,i,h=document.createElement("img");if(h.onerror=l,h.onload=function(){!i||k&&k.noRevoke||d.revokeObjectURL(i),l&&l(d.scale(h,k))},d.isInstanceOf("Blob",b)||d.isInstanceOf("File",b)){j=i=d.createObjectURL(b),h._type=b.type}else{if("string"!=typeof b){return !1}j=b,k&&k.crossOrigin&&(h.crossOrigin=k.crossOrigin)}return j?(h.src=j,h):d.readFile(b,function(g){var c=g.target;c&&c.result?h.src=c.result:l&&l(g)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;d.isInstanceOf=function(g,c){return Object.prototype.toString.call(c)==="[object "+g+"]"},d.transformCoordinates=function(){},d.getTransformedOptions=function(b){return b},d.renderImageToCanvas=function(t,s,r,q,p,o,n,m,l,k){return t.getContext("2d").drawImage(s,r,q,p,o,n,m,l,k),t},d.hasCanvasOption=function(b){return b.canvas||b.crop},d.scale=function(L,K){K=K||{};var J,I,H,G,F,E,D,C,B,A=document.createElement("canvas"),z=L.getContext||d.hasCanvasOption(K)&&A.getContext,y=L.naturalWidth||L.width,x=L.naturalHeight||L.height,w=y,v=x,u=function(){var c=Math.max((H||w)/w,(G||v)/v);c>1&&(w=Math.ceil(w*c),v=Math.ceil(v*c))},b=function(){var c=Math.min((J||w)/w,(I||v)/v);1>c&&(w=Math.ceil(w*c),v=Math.ceil(v*c))};return z&&(K=d.getTransformedOptions(K),D=K.left||0,C=K.top||0,K.sourceWidth?(F=K.sourceWidth,void 0!==K.right&&void 0===K.left&&(D=y-F-K.right)):F=y-D-(K.right||0),K.sourceHeight?(E=K.sourceHeight,void 0!==K.bottom&&void 0===K.top&&(C=x-E-K.bottom)):E=x-C-(K.bottom||0),w=F,v=E),J=K.maxWidth,I=K.maxHeight,H=K.minWidth,G=K.minHeight,z&&J&&I&&K.crop?(w=J,v=I,B=F/E-J/I,0>B?(E=I*F/J,void 0===K.top&&void 0===K.bottom&&(C=(x-E)/2)):B>0&&(F=J*E/I,void 0===K.left&&void 0===K.right&&(D=(y-F)/2))):((K.contain||K.cover)&&(H=J=J||H,G=I=I||G),K.cover?(b(),u()):(u(),b())),z?(A.width=w,A.height=v,d.transformCoordinates(A,K),d.renderImageToCanvas(A,L,D,C,F,E,0,0,w,v)):(L.width=w,L.height=v,L)},d.createObjectURL=function(b){return f?f.createObjectURL(b):!1},d.revokeObjectURL=function(b){return f?f.revokeObjectURL(b):!1},d.readFile=function(h,g,j){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=g,j=j||"readAsDataURL",i[j]){return i[j](h),i}}return !1},"function"==typeof define&&define.amd?define(function(){return d}):e.loadImage=d}(this),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(d){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var c=d.renderImageToCanvas;d.detectSubsampling=function(f){var e,g;return f.width*f.height>1048576?(e=document.createElement("canvas"),e.width=e.height=1,g=e.getContext("2d"),g.drawImage(f,-f.width+1,0),0===g.getImageData(0,0,1,1).data[3]):!1},d.detectVerticalSquash=function(t,s){var r,q,p,o,n,m=t.naturalHeight||t.height,l=document.createElement("canvas"),k=l.getContext("2d");for(s&&(m/=2),l.width=1,l.height=m,k.drawImage(t,0,0),r=k.getImageData(0,0,1,m).data,q=0,p=m,o=m;o>q;){n=r[4*(o-1)+3],0===n?p=o:q=o,o=p+q>>1}return o/m||1},d.renderImageToCanvas=function(J,I,H,G,F,E,D,C,B,A){if("image/jpeg"===I._type){var z,y,x,w,v=J.getContext("2d"),u=document.createElement("canvas"),b=1024,a=u.getContext("2d");if(u.width=b,u.height=b,v.save(),z=d.detectSubsampling(I),z&&(H/=2,G/=2,F/=2,E/=2),y=d.detectVerticalSquash(I,z),z||1!==y){for(G*=y,B=Math.ceil(b*B/F),A=Math.ceil(b*A/E/y),C=0,w=0;E>w;){for(D=0,x=0;F>x;){a.clearRect(0,0,b,b),a.drawImage(I,H,G,F,E,-x,-w,F,E),v.drawImage(u,0,0,b,b,D,C,B,A),x+=b,D+=B}w+=b,C+=A}return v.restore(),J}}return c(J,I,H,G,F,E,D,C,B,A)}}}),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(d){var c=d.hasCanvasOption;d.hasCanvasOption=function(b){return c(b)||b.orientation},d.transformCoordinates=function(h,g){var l=h.getContext("2d"),k=h.width,j=h.height,i=g.orientation;if(i){switch(i>4&&(h.width=j,h.height=k),i){case 2:l.translate(k,0),l.scale(-1,1);break;case 3:l.translate(k,j),l.rotate(Math.PI);break;case 4:l.translate(0,j),l.scale(1,-1);break;case 5:l.rotate(0.5*Math.PI),l.scale(1,-1);break;case 6:l.rotate(0.5*Math.PI),l.translate(0,-j);break;case 7:l.rotate(0.5*Math.PI),l.translate(k,-j),l.scale(-1,1);break;case 8:l.rotate(-0.5*Math.PI),l.translate(-k,0)}}},d.getTransformedOptions=function(f){if(!f.orientation||1===f.orientation){return f}var e,g={};for(e in f){f.hasOwnProperty(e)&&(g[e]=f[e])}switch(f.orientation){case 2:g.left=f.right,g.right=f.left;break;case 3:g.left=f.right,g.top=f.bottom,g.right=f.left,g.bottom=f.top;break;case 4:g.top=f.bottom,g.bottom=f.top;break;case 5:g.left=f.top,g.top=f.left,g.right=f.bottom,g.bottom=f.right;break;case 6:g.left=f.top,g.top=f.right,g.right=f.bottom,g.bottom=f.left;break;case 7:g.left=f.bottom,g.top=f.right,g.right=f.top,g.bottom=f.left;break;case 8:g.left=f.bottom,g.top=f.left,g.right=f.top,g.bottom=f.right}return f.orientation>4&&(g.maxWidth=f.maxHeight,g.maxHeight=f.maxWidth,g.minWidth=f.minHeight,g.minHeight=f.minWidth,g.sourceWidth=f.sourceHeight,g.sourceHeight=f.sourceWidth),g}}),function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)}(function(d){var c=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);d.blobSlice=c&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},d.metaDataParsers={jpeg:{65505:[]}},d.parseMetaData=function(a,n,m){m=m||{};var l=this,k=m.maxMetaDataSize||262144,j={},i=!(window.DataView&&a&&a.size>=12&&"image/jpeg"===a.type&&d.blobSlice);(i||!d.readFile(d.blobSlice.call(a,0,k),function(w){if(w.target.error){return console.log(w.target.error),n(j),void 0}var v,u,t,s,r=w.target.result,q=new DataView(r),p=2,g=q.byteLength-4,e=p;if(65496===q.getUint16(0)){for(;g>p&&(v=q.getUint16(p),v>=65504&&65519>=v||65534===v);){if(u=q.getUint16(p+2)+2,p+u>q.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(t=d.metaDataParsers.jpeg[v]){for(s=0;s<t.length;s+=1){t[s].call(l,q,p,u,j,m)}}p+=u,e=p}!m.disableImageHead&&e>6&&(j.imageHead=r.slice?r.slice(0,e):new Uint8Array(r).subarray(0,e))}else{console.log("Invalid JPEG file: Missing JPEG marker.")}n(j)},"readAsArrayBuffer"))&&n(j)}}),function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],b):b(window.loadImage)}(function(b){b.ExifMap=function(){return this},b.ExifMap.prototype.map={Orientation:274},b.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]},b.getExifThumbnail=function(h,g,l){var k,j,i;if(!l||g+l>h.byteLength){return console.log("Invalid Exif data: Invalid thumbnail data."),void 0}for(k=[],j=0;l>j;j+=1){i=h.getUint8(g+j),k.push((16>i?"0":"")+i.toString(16))}return"data:image/jpeg,%"+k.join("%")},b.exifTagTypes={1:{getValue:function(d,c){return d.getUint8(c)},size:1},2:{getValue:function(d,c){return String.fromCharCode(d.getUint8(c))},size:1,ascii:!0},3:{getValue:function(e,d,f){return e.getUint16(d,f)},size:2},4:{getValue:function(e,d,f){return e.getUint32(d,f)},size:4},5:{getValue:function(e,d,f){return e.getUint32(d,f)/e.getUint32(d+4,f)},size:8},9:{getValue:function(e,d,f){return e.getInt32(d,f)},size:4},10:{getValue:function(e,d,f){return e.getInt32(d,f)/e.getInt32(d+4,f)},size:8}},b.exifTagTypes[7]=b.exifTagTypes[1],b.getExifValue=function(z,y,x,w,v,u){var t,s,r,q,p,o,a=b.exifTagTypes[w];if(!a){return console.log("Invalid Exif data: Invalid tag type."),void 0}if(t=a.size*v,s=t>4?y+z.getUint32(x+8,u):x+8,s+t>z.byteLength){return console.log("Invalid Exif data: Invalid data offset."),void 0}if(1===v){return a.getValue(z,s,u)}for(r=[],q=0;v>q;q+=1){r[q]=a.getValue(z,s+q*a.size,u)}if(a.ascii){for(p="",q=0;q<r.length&&(o=r[q],"\x00"!==o);q+=1){p+=o}return p}return r},b.parseExifTag=function(a,l,k,j,i){var h=a.getUint16(k,j);i.exif[h]=b.getExifValue(a,l,k,a.getUint16(k+2,j),a.getUint32(k+4,j),j)},b.parseExifTags=function(j,i,p,o,n){var m,l,k;if(p+6>j.byteLength){return console.log("Invalid Exif data: Invalid directory offset."),void 0}if(m=j.getUint16(p,o),l=p+2+12*m,l+4>j.byteLength){return console.log("Invalid Exif data: Invalid directory size."),void 0}for(k=0;m>k;k+=1){this.parseExifTag(j,i,p+2+12*k,o,n)}return j.getUint32(l,o)},b.parseExifData=function(r,q,p,o,n){if(!n.disableExif){var m,l,k,a=q+10;if(1165519206===r.getUint32(q+4)){if(a+8>r.byteLength){return console.log("Invalid Exif data: Invalid segment size."),void 0}if(0!==r.getUint16(q+8)){return console.log("Invalid Exif data: Missing byte alignment offset."),void 0}switch(r.getUint16(a)){case 18761:m=!0;break;case 19789:m=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==r.getUint16(a+2,m)){return console.log("Invalid Exif data: Missing TIFF marker."),void 0}l=r.getUint32(a+4,m),o.exif=new b.ExifMap,l=b.parseExifTags(r,a,a+l,m,o),l&&!n.disableExifThumbnail&&(k={exif:{}},l=b.parseExifTags(r,a,a+l,m,k),k.exif[513]&&(o.exif.Thumbnail=b.getExifThumbnail(r,a+k.exif[513],k.exif[514]))),o.exif[34665]&&!n.disableExifSub&&b.parseExifTags(r,a,a+o.exif[34665],m,o),o.exif[34853]&&!n.disableExifGps&&b.parseExifTags(r,a,a+o.exif[34853],m,o)}}},b.metaDataParsers.jpeg[65505].push(b.parseExifData)}),function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],b):b(window.loadImage)}(function(b){b.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},b.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},b.ExifMap.prototype.getText=function(d){var c=this.get(d);switch(d){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[d][c];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(c[0],c[1],c[2],c[3]);case"ComponentsConfiguration":return this.stringValues[d][c[0]]+this.stringValues[d][c[1]]+this.stringValues[d][c[2]]+this.stringValues[d][c[3]];case"GPSVersionID":return c[0]+"."+c[1]+"."+c[2]+"."+c[3]}return String(c)},function(f){var e,h=f.tags,g=f.map;for(e in h){h.hasOwnProperty(e)&&(g[h[e]]=e)}}(b.ExifMap.prototype),b.ExifMap.prototype.getAll=function(){var e,d,f={};for(e in this){this.hasOwnProperty(e)&&(d=this.tags[e],d&&(f[d]=this.getText(d)))}return f}});


!function(h){var g=h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype,l=h.Blob&&function(){try{return Boolean(new Blob)}catch(b){return !1}}(),k=l&&h.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(b){return !1}}(),j=h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder||h.MSBlobBuilder,i=(l||j)&&h.atob&&h.ArrayBuffer&&h.Uint8Array&&function(d){var c,p,o,n,m,e;for(c=d.split(",")[0].indexOf("base64")>=0?atob(d.split(",")[1]):decodeURIComponent(d.split(",")[1]),p=new ArrayBuffer(c.length),o=new Uint8Array(p),n=0;n<c.length;n+=1){o[n]=c.charCodeAt(n)}return m=d.split(",")[0].split(":")[1].split(";")[0],l?new Blob([k?o:p],{type:m}):(e=new j,e.append(p),e.getBlob(m))};h.HTMLCanvasElement&&!g.toBlob&&(g.mozGetAsFile?g.toBlob=function(b,f,e){e&&g.toDataURL&&i?b(i(this.toDataURL(f,e))):b(this.mozGetAsFile("blob",f))}:g.toDataURL&&i&&(g.toBlob=function(e,d,f){e(i(this.toDataURL(d,f)))})),"function"==typeof define&&define.amd?define(function(){return i}):h.dataURLtoBlob=i}(this);


!function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper"],b):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=b(window.blueimp.helper||window.jQuery))}(function(d){function c(b,e){return void 0===document.body.style.maxHeight?null:this&&this.options===c.prototype.options?b&&b.length?(this.list=b,this.num=b.length,this.initOptions(e),void this.initialize()):void this.console.log("blueimp Gallery: No or empty list provided as first argument.",b):new c(b,e)}return d.extend(c.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5000,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(a){var h={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},g={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},f=function(){var b,j,i=h.transition;document.body.appendChild(a),i&&(b=i.name.slice(0,-9)+"ransform",void 0!==a.style[b]&&(a.style[b]="translateZ(0)",j=window.getComputedStyle(a).getPropertyValue(i.prefix+"transform"),h.transform={prefix:i.prefix,name:b,translate:!0,translateZ:!!j&&"none"!==j})),void 0!==a.style.backgroundSize&&(h.backgroundSize={},a.style.backgroundSize="contain",h.backgroundSize.contain="contain"===window.getComputedStyle(a).getPropertyValue("background-size"),a.style.backgroundSize="cover",h.backgroundSize.cover="cover"===window.getComputedStyle(a).getPropertyValue("background-size")),document.body.removeChild(a)};return function(b,i){var e;for(e in i){if(i.hasOwnProperty(e)&&void 0!==a.style[e]){b.transition=i[e],b.transition.name=e;break}}}(h,g),document.body?f():d(document).on("DOMContentLoaded",f),h}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),void (this.options.startSlideshow&&this.play()))},slide:function(h,g){window.clearTimeout(this.timeout);var l,k,j,i=this.index;if(i!==h&&1!==this.num){if(g||(g=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(h=this.circle(h)),l=Math.abs(i-h)/(i-h),this.options.continuous&&(k=l,l=-this.positions[this.circle(h)]/this.slideWidth,l!==k&&(h=-l*this.num+h)),j=Math.abs(i-h)-1;j;){j-=1,this.move(this.circle((h>i?h:i)-j-1),this.slideWidth*l,0)}h=this.circle(h),this.move(i,this.slideWidth*l,g),this.move(h,0,g),this.options.continuous&&this.move(this.circle(h-l),-(this.slideWidth*l),0)}else{h=this.circle(h),this.animate(i*-this.slideWidth,h*-this.slideWidth,g)}this.onslide(h)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(f){var e=this;window.clearTimeout(this.timeout),this.interval=f||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(b,g){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(b,g)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(f){var e;for(f.concat||(f=Array.prototype.slice.call(f)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(f),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-f.length;e<this.num;e+=1){this.addSlide(e),this.positionSlide(e)}this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},handleClose:function(){var b=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(b.displayClass).removeClass(b.singleClass).removeClass(b.leftEdgeClass).removeClass(b.rightEdgeClass),b.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var f=this,e=function(a){a.target===f.container[0]&&(f.container.off(f.support.transition.end,e),f.handleClose())};this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(b){return(this.num+b%this.num)%this.num},move:function(f,e,g){this.translateX(f,e,g),this.positions[f]=e},translate:function(i,h,n,m){var l=this.slides[i].style,k=this.support.transition,j=this.support.transform;l[k.name+"Duration"]=m+"ms",l[j.name]="translate("+h+"px, "+n+"px)"+(j.translateZ?" translateZ(0)":"")},translateX:function(f,e,g){this.translate(f,e,0,g)},translateY:function(f,e,g){this.translate(f,0,e,g)},animate:function(h,g,l){if(!l){return void (this.slidesContainer[0].style.left=g+"px")}var k=this,j=(new Date).getTime(),i=window.setInterval(function(){var a=(new Date).getTime()-j;return a>l?(k.slidesContainer[0].style.left=g+"px",k.ontransitionend(),void window.clearInterval(i)):void (k.slidesContainer[0].style.left=(g-h)*(Math.floor(a/l*100)/100)+h+"px")},4)},preventDefault:function(b){b.preventDefault?b.preventDefault():b.returnValue=!1},stopPropagation:function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(b){b.which&&1===b.which&&"VIDEO"!==b.target.nodeName&&(b.preventDefault(),(b.originalEvent||b).touches=[{pageX:b.pageX,pageY:b.pageY}],this.ontouchstart(b))},onmousemove:function(b){this.touchStart&&((b.originalEvent||b).touches=[{pageX:b.pageX,pageY:b.pageY}],this.ontouchmove(b))},onmouseup:function(b){this.touchStart&&(this.ontouchend(b),delete this.touchStart)},onmouseout:function(a){if(this.touchStart){var f=a.target,e=a.relatedTarget;(!e||e!==f&&!d.contains(f,e))&&this.onmouseup(a)}},ontouchstart:function(f){this.options.stopTouchEventsPropagation&&this.stopPropagation(f);var e=(f.originalEvent||f).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(h){this.options.stopTouchEventsPropagation&&this.stopPropagation(h);var g,l,k=(h.originalEvent||h).touches[0],j=(h.originalEvent||h).scale,i=this.index;if(!(k.length>1||j&&1!==j)){if(this.options.disableScroll&&h.preventDefault(),this.touchDelta={x:k.pageX-this.touchStart.x,y:k.pageY-this.touchStart.y},g=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(g)<Math.abs(this.touchDelta.y)),this.isScrolling){this.options.closeOnSwipeUpOrDown&&this.translateY(i,this.touchDelta.y+this.positions[i],0)}else{for(h.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?l=[this.circle(i+1),i,this.circle(i-1)]:(this.touchDelta.x=g/=!i&&g>0||i===this.num-1&&0>g?Math.abs(g)/this.slideWidth+1:1,l=[i],i&&l.push(i-1),i<this.num-1&&l.unshift(i+1));l.length;){i=l.pop(),this.translateX(i,g+this.positions[i],0)}}}},ontouchend:function(z){this.options.stopTouchEventsPropagation&&this.stopPropagation(z);var y,x,w,v,u,t=this.index,s=this.options.transitionSpeed,r=this.slideWidth,q=Number(Date.now()-this.touchStart.time)<250,p=q&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>r/2,o=!t&&this.touchDelta.x>0||t===this.num-1&&this.touchDelta.x<0,n=!p&&this.options.closeOnSwipeUpOrDown&&(q&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(o=!1),y=this.touchDelta.x<0?-1:1,this.isScrolling?n?this.close():this.translateY(t,0,s):p&&!o?(x=t+y,w=t-y,v=r*y,u=-r*y,this.options.continuous?(this.move(this.circle(x),v,0),this.move(this.circle(t-2*y),u,0)):x>=0&&x<this.num&&this.move(x,v,0),this.move(t,this.positions[t]+v,s),this.move(this.circle(w),this.positions[this.circle(w)]+v,s),t=this.circle(w),this.onslide(t)):this.options.continuous?(this.move(this.circle(t-1),-r,s),this.move(t,0,s),this.move(this.circle(t+1),r,s)):(t&&this.move(t-1,-r,s),this.move(t,0,s),t<this.num-1&&this.move(t+1,r,s))},ontouchcancel:function(b){this.touchStart&&(this.ontouchend(b),delete this.touchStart)},ontransitionend:function(f){var e=this.slides[this.index];f&&e!==f.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(a){var h,g=a.target||a.srcElement,f=g&&g.parentNode;g&&f&&(h=this.getNodeIndex(f),d(f).removeClass(this.options.slideLoadingClass),"error"===a.type?(d(f).addClass(this.options.slideErrorClass),this.elements[h]=3):this.elements[h]=2,g.clientHeight>this.container[0].clientHeight&&(g.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===f&&this.play(),this.setTimeout(this.options.onslidecomplete,[h,f]))},onload:function(b){this.oncomplete(b)},onerror:function(b){this.oncomplete(b)},onkeydown:function(b){switch(b.which||b.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(b),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(b),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(b),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(b),this.next())}},handleClick:function(a){var j=this.options,i=a.target||a.srcElement,h=i.parentNode,g=function(e){return d(i).hasClass(e)||d(h).hasClass(e)};g(j.toggleClass)?(this.preventDefault(a),this.toggleControls()):g(j.prevClass)?(this.preventDefault(a),this.prev()):g(j.nextClass)?(this.preventDefault(a),this.next()):g(j.closeClass)?(this.preventDefault(a),this.close()):g(j.playPauseClass)?(this.preventDefault(a),this.toggleSlideshow()):h===this.slidesContainer[0]?(this.preventDefault(a),j.closeOnSlideClick?this.close():this.toggleControls()):h.parentNode&&h.parentNode===this.slidesContainer[0]&&(this.preventDefault(a),this.toggleControls())},onclick:function(b){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?void delete this.touchDelta:this.handleClick(b)},updateEdgeClasses:function(b){b?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),b===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(b){this.options.continuous||this.updateEdgeClasses(b),this.loadElements(b),this.options.unloadElements&&this.unloadElements(b),this.setTitle(b)},onslide:function(b){this.index=b,this.handleSlide(b),this.setTimeout(this.options.onslide,[b,this.slides[b]])},setTitle:function(f){var e=this.slides[f].firstChild.title,g=this.titleElement;g.length&&(this.titleElement.empty(),e&&g[0].appendChild(document.createTextNode(e)))},setTimeout:function(f,e,h){var g=this;return f&&window.setTimeout(function(){f.apply(g,e||[])},h||0)},imageFactory:function(t,s){var r,q,p,o=this,n=this.imagePrototype.cloneNode(!1),m=t,l=this.options.stretchImages,a=function(e){if(!r){if(e={type:e.type,target:q},!q.parentNode){return o.setTimeout(a,[e])}r=!0,d(n).off("load error",a),l&&"load"===e.type&&(q.style.background='url("'+m+'") center no-repeat',q.style.backgroundSize=l),s(e)}};return"string"!=typeof m&&(m=this.getItemProperty(t,this.options.urlProperty),p=this.getItemProperty(t,this.options.titleProperty)),l===!0&&(l="contain"),l=this.support.backgroundSize&&this.support.backgroundSize[l]&&l,l?q=this.elementPrototype.cloneNode(!1):(q=n,n.draggable=!1),p&&(q.title=p),d(n).on("load error",a),n.src=m,q},createElement:function(a,j){var i=a&&this.getItemProperty(a,this.options.typeProperty),h=i&&this[i.split("/")[0]+"Factory"]||this.imageFactory,g=a&&h.call(this,a,j);return g||(g=this.elementPrototype.cloneNode(!1),this.setTimeout(j,[{type:"error",target:g}])),d(g).addClass(this.options.slideContentClass),g},loadElement:function(a){this.elements[a]||(this.slides[a].firstChild?this.elements[a]=d(this.slides[a]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[a]=1,d(this.slides[a]).addClass(this.options.slideLoadingClass),this.slides[a].appendChild(this.createElement(this.list[a],this.proxyListener))))},loadElements:function(f){var e,h=Math.min(this.num,2*this.options.preloadRange+1),g=f;for(e=0;h>e;e+=1){g+=e*(e%2===0?-1:1),g=this.circle(g),this.loadElement(g)}},unloadElements:function(f){var e,h,g;for(e in this.elements){this.elements.hasOwnProperty(e)&&(g=Math.abs(f-e),g>this.options.preloadRange&&g+this.options.preloadRange<this.num&&(h=this.slides[e],h.removeChild(h.firstChild),delete this.elements[e]))}},addSlide:function(f){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",f),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(f){var e=this.slides[f];e.style.width=this.slideWidth+"px",this.support.transition&&(e.style.left=f*-this.slideWidth+"px",this.move(f,this.index>f?-this.slideWidth:this.index<f?this.slideWidth:0,0))},initSlides:function(a){var f,e;for(a||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),d(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,f=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",f&&this.resetSlides(),e=0;e<this.num;e+=1){f&&this.addSlide(e),this.positionSlide(e)}this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var b=this.options.controlsClass;this.container.hasClass(b)?this.container.removeClass(b):this.container.addClass(b)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(b){return parseInt(b.getAttribute("data-index"),10)},getNestedProperty:function(f,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(a,l,k,j,i){var h=i||l||k||j&&parseInt(j,10);a&&f&&(f=f[h])}),f},getDataProperty:function(a,h){if(a.getAttribute){var g=a.getAttribute("data-"+h.replace(/([A-Z])/g,"-$1").toLowerCase());if("string"==typeof g){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(g)){try{return d.parseJSON(g)}catch(f){}}return g}}},getItemProperty:function(f,e){var g=f[e];return void 0===g&&(g=this.getDataProperty(f,e),void 0===g&&(g=this.getNestedProperty(f,e))),g},initStartIndex:function(){var f,e=this.options.index,g=this.options.urlProperty;if(e&&"number"!=typeof e){for(f=0;f<this.num;f+=1){if(this.list[f]===e||this.getItemProperty(this.list[f],g)===this.getItemProperty(e,g)){e=f;break}}}this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var a=this,f=this.slidesContainer,e=function(b){var g=a.support.transition&&a.support.transition.end===b.type?"transitionend":b.type;a["on"+g](b)};d(window).on("resize",e),d(document.body).on("keydown",e),this.container.on("click",e),this.support.touch?f.on("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&f.on("mousedown mousemove mouseup mouseout",e),this.support.transition&&f.on(this.support.transition.end,e),this.proxyListener=e},destroyEventListeners:function(){var a=this.slidesContainer,e=this.proxyListener;d(window).off("resize",e),d(document.body).off("keydown",e),this.container.off("click",e),this.support.touch?a.off("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&a.off("mousedown mousemove mouseup mouseout",e),this.support.transition&&a.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var a=this,e=function(b){b.target===a.container[0]&&(a.container.off(a.support.transition.end,e),a.handleOpen())};return this.container=d(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,e):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(a){this.options=d.extend({},this.options),(a&&a.carousel||this.options.carousel&&(!a||a.carousel!==!1))&&d.extend(this.options,this.carouselOptions),d.extend(this.options,a),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),c}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(f,e){f.extend(e.prototype.options,{fullScreen:!1});var h=e.prototype.initialize,g=e.prototype.close;return f.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(b){b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen&&b.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){h.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),g.call(this)}}),e}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(j,i){j.extend(i.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var p=i.prototype.initSlides,o=i.prototype.addSlide,n=i.prototype.resetSlides,m=i.prototype.handleClick,l=i.prototype.handleSlide,k=i.prototype.handleClose;return j.extend(i.prototype,{createIndicator:function(a){var t,s,r=this.indicatorPrototype.cloneNode(!1),q=this.getItemProperty(a,this.options.titleProperty),h=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(s=a.getElementsByTagName&&j(a).find("img")[0],s?t=s.src:h&&(t=this.getItemProperty(a,h)),t&&(r.style.backgroundImage='url("'+t+'")')),q&&(r.title=q),r},addIndicator:function(d){if(this.indicatorContainer.length){var c=this.createIndicator(this.list[d]);c.setAttribute("data-index",d),this.indicatorContainer[0].appendChild(c),this.indicators.push(c)}},setActiveIndicator:function(a){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=j(this.indicators[a]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(b){b||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),p.call(this,b)},addSlide:function(b){o.call(this,b),this.addIndicator(b)},resetSlides:function(){n.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(e){var d=e.target||e.srcElement,f=d.parentNode;if(f===this.indicatorContainer[0]){this.preventDefault(e),this.slide(this.getNodeIndex(d))}else{if(f.parentNode!==this.indicatorContainer[0]){return m.call(this,e)}this.preventDefault(e),this.slide(this.getNodeIndex(f))}},handleSlide:function(b){l.call(this,b),this.setActiveIndicator(b)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),k.call(this)}}),i}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,d){e.extend(d.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var f=d.prototype.handleSlide;return e.extend(d.prototype,{handleSlide:function(b){f.call(this,b),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(L,K,J){var I,H,G,F,E,D=this,C=this.options,B=this.elementPrototype.cloneNode(!1),A=e(B),z=[{type:"error",target:B}],y=J||document.createElement("video"),x=this.getItemProperty(L,C.urlProperty),w=this.getItemProperty(L,C.typeProperty),v=this.getItemProperty(L,C.titleProperty),u=this.getItemProperty(L,C.videoPosterProperty),a=this.getItemProperty(L,C.videoSourcesProperty);if(A.addClass(C.videoContentClass),v&&(B.title=v),y.canPlayType){if(x&&w&&y.canPlayType(w)){y.src=x}else{for(;a&&a.length;){if(H=a.shift(),x=this.getItemProperty(H,C.urlProperty),w=this.getItemProperty(H,C.typeProperty),x&&w&&y.canPlayType(w)){y.src=x;break}}}}return u&&(y.poster=u,I=this.imagePrototype.cloneNode(!1),e(I).addClass(C.toggleClass),I.src=u,I.draggable=!1,B.appendChild(I)),G=document.createElement("a"),G.setAttribute("target","_blank"),J||G.setAttribute("download",v),G.href=x,y.src&&(y.controls=!0,(J||e(y)).on("error",function(){D.setTimeout(K,z)}).on("pause",function(){F=!1,A.removeClass(D.options.videoLoadingClass).removeClass(D.options.videoPlayingClass),E&&D.container.addClass(D.options.controlsClass),delete D.playingVideo,D.interval&&D.play()}).on("playing",function(){F=!1,A.removeClass(D.options.videoLoadingClass).addClass(D.options.videoPlayingClass),D.container.hasClass(D.options.controlsClass)?(E=!0,D.container.removeClass(D.options.controlsClass)):E=!1}).on("play",function(){window.clearTimeout(D.timeout),F=!0,A.addClass(D.options.videoLoadingClass),D.playingVideo=y}),e(G).on("click",function(b){D.preventDefault(b),F?y.pause():y.play()}),B.appendChild(J&&J.element||y)),B.appendChild(G),this.setTimeout(K,[{type:"load",target:B}]),B}}),d}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(g,f){if(!window.postMessage){return f}g.extend(f.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var j=f.prototype.textFactory||f.prototype.imageFactory,i=function(k,e,m,l){this.url=k,this.videoId=e,this.playerId=m,this.clickToPlay=l,this.element=document.createElement("div"),this.listeners={}},h=0;return g.extend(i.prototype,{canPlayType:function(){return !0},on:function(d,c){return this.listeners[d]=c,this},loadAPI:function(){for(var a,p,o=this,n="//"+("https"===location.protocol?"secure-":"")+"a.vimeocdn.com/js/froogaloop2.min.js",m=document.getElementsByTagName("script"),l=m.length,k=function(){!p&&o.playOnReady&&o.play(),p=!0};l;){if(l-=1,m[l].src===n){a=m[l];break}}a||(a=document.createElement("script"),a.src=n),g(a).on("load",k),m[0].parentNode.insertBefore(a,m[0]),/loaded|complete/.test(a.readyState)&&k()},onReady:function(){var b=this;this.ready=!0,this.player.addEvent("play",function(){b.hasPlayed=!0,b.onPlaying()}),this.player.addEvent("pause",function(){b.onPause()}),this.player.addEvent("finish",function(){b.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var b=document.createElement("iframe");b.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),b.id=this.playerId,this.element.parentNode.replaceChild(b,this.element),this.element=b},play:function(){var b=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){b.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),g.extend(f.prototype,{VimeoPlayer:i,textFactory:function(d,c){var e=this.getItemProperty(d,this.options.vimeoVideoIdProperty);return e?(h+=1,this.videoFactory(d,c,new i(this.options.vimeoPlayerUrl,e,this.options.vimeoPlayerIdPrefix+h,this.options.vimeoClickToPlay))):j.call(this,d,c)}}),f}),function(b){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],b):b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(f,e){if(!window.postMessage){return e}f.extend(e.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var h=e.prototype.textFactory||e.prototype.imageFactory,g=function(i,d,j){this.videoId=i,this.playerVars=d,this.clickToPlay=j,this.element=document.createElement("div"),this.listeners={}};return f.extend(g.prototype,{canPlayType:function(){return !0},on:function(d,c){return this.listeners[d]=c,this},loadAPI:function(){var j,i=this,n=window.onYouTubeIframeAPIReady,m="//www.youtube.com/iframe_api",l=document.getElementsByTagName("script"),k=l.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),i.playOnReady&&i.play()};k;){if(k-=1,l[k].src===m){return}}j=document.createElement("script"),j.src=m,l[0].parentNode.insertBefore(j,l[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2000)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(b){switch(b.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=b.data},onError:function(b){this.listeners.error(b)},play:function(){var b=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){b.onReady()},onStateChange:function(a){b.onStateChange(a)},onError:function(a){b.onError(a)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),f.extend(e.prototype,{YouTubePlayer:g,textFactory:function(d,c){var i=this.getItemProperty(d,this.options.youTubeVideoIdProperty);return i?this.videoFactory(d,c,new g(i,this.options.youTubePlayerVars,this.options.youTubeClickToPlay)):h.call(this,d,c)}}),e}),function(b){"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],b):b(window.jQuery,window.blueimp.Gallery)}(function(d,c){d(document).on("click","[data-gallery]",function(n){var m=d(this).data("gallery"),l=d(m),k=l.length&&l||d(c.prototype.options.container),j={onopen:function(){k.data("gallery",this).trigger("open")},onopened:function(){k.trigger("opened")},onslide:function(){k.trigger("slide",arguments)},onslideend:function(){k.trigger("slideend",arguments)},onslidecomplete:function(){k.trigger("slidecomplete",arguments)},onclose:function(){k.trigger("close")},onclosed:function(){k.trigger("closed").removeData("gallery")}},b=d.extend(k.data(),{container:k[0],index:this,event:n},j),a=d('[data-gallery="'+m+'"]');return b.filter&&(a=a.filter(b.filter)),new c(a,b)})});


(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var a=0;b.ajaxTransport("iframe",function(d){if(d.async){var c=d.initialIframeSrc||"javascript:false;",f,e,g;return{send:function(h,i){f=b('<form style="display:none;"></form>');f.attr("accept-charset",d.formAcceptCharset);g=/\?/.test(d.url)?"&":"?";if(d.type==="DELETE"){d.url=d.url+g+"_method=DELETE";d.type="POST"}else{if(d.type==="PUT"){d.url=d.url+g+"_method=PUT";d.type="POST"}else{if(d.type==="PATCH"){d.url=d.url+g+"_method=PATCH";d.type="POST"}}}a+=1;e=b('<iframe src="'+c+'" name="iframe-transport-'+a+'"></iframe>').bind("load",function(){var j,k=b.isArray(d.paramName)?d.paramName:[d.paramName];e.unbind("load").bind("load",function(){var l;try{l=e.contents();if(!l.length||!l[0].firstChild){throw new Error()}}catch(m){l=undefined}i(200,"success",{iframe:l});b('<iframe src="'+c+'"></iframe>').appendTo(f);window.setTimeout(function(){f.remove()},0)});f.prop("target",e.prop("name")).prop("action",d.url).prop("method",d.type);if(d.formData){b.each(d.formData,function(l,m){b('<input type="hidden"/>').prop("name",m.name).val(m.value).appendTo(f)})}if(d.fileInput&&d.fileInput.length&&d.type==="POST"){j=d.fileInput.clone();d.fileInput.after(function(l){return j[l]});if(d.paramName){d.fileInput.each(function(l){b(this).prop("name",k[l]||d.paramName)})}f.append(d.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");d.fileInput.removeAttr("form")}f.submit();if(j&&j.length){d.fileInput.each(function(m,l){var n=b(j[m]);b(l).prop("name",n.prop("name")).attr("form",n.attr("form"));n.replaceWith(l)})}});f.append(e).appendTo(document.body)},abort:function(){if(e){e.unbind("load").prop("src",c)}if(f){f.remove()}}}}});b.ajaxSetup({converters:{"iframe text":function(c){return c&&b(c[0].body).text()},"iframe json":function(c){return c&&b.parseJSON(b(c[0].body).text())},"iframe html":function(c){return c&&b(c[0].body).html()},"iframe xml":function(c){var d=c&&c[0];return d&&b.isXMLDoc(d)?d:b.parseXML((d.XMLDocument&&d.XMLDocument.xml)||b(d.body).html())},"iframe script":function(c){return c&&b.globalEval(b(c[0].body).text())}}})}));



(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{a(window.jQuery)}}(function(a){a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled"));a.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(c,b){c=this.messages[c]||c.toString();if(b){a.each(b,function(d,e){c=c.replace("{"+d+"}",e)})}return c},formData:function(b){return b.serializeArray()},add:function(c,b){if(c.isDefaultPrevented()){return false}if(b.autoUpload||(b.autoUpload!==false&&a(this).fileupload("option","autoUpload"))){b.process().done(function(){b.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(d,c,b){var e=d-this.timestamp;if(!this.bitrate||!b||e>b){this.bitrate=(c-this.loaded)*(1000/e)*8;this.loaded=c;this.timestamp=d}return this.bitrate}},_isXHRUpload:function(b){return !b.forceIframeTransport&&((!b.multipart&&a.support.xhrFileUpload)||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;if(a.type(b.formData)==="function"){return b.formData(b.form)}if(a.isArray(b.formData)){return b.formData}if(a.type(b.formData)==="object"){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_initProgressObject:function(c){var b={loaded:0,total:0,bitrate:0};if(c._progress){a.extend(c._progress,b)}else{c._progress=b}},_initResponseObject:function(b){var c;if(b._response){for(c in b._response){if(b._response.hasOwnProperty(c)){delete b._response[c]}}}else{b._response={}}},_onProgress:function(f,d){if(f.lengthComputable){var c=((Date.now)?Date.now():(new Date()).getTime()),b;if(d._time&&d.progressInterval&&(c-d._time<d.progressInterval)&&f.loaded!==f.total){return}d._time=c;b=Math.floor(f.loaded/f.total*(d.chunkSize||d._progress.total))+(d.uploadedBytes||0);this._progress.loaded+=(b-d._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,d.bitrateInterval);d._progress.loaded=d.loaded=b;d._progress.bitrate=d.bitrate=d._bitrateTimer.getBitrate(c,b,d.bitrateInterval);this._trigger("progress",a.Event("progress",{delegatedEvent:f}),d);this._trigger("progressall",a.Event("progressall",{delegatedEvent:f}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload){a(d.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;c._onProgress(f,b)});b.xhr=function(){return d}}},_isInstanceOf:function(b,c){return Object.prototype.toString.call(c)==="[object "+b+"]"},_initXHRData:function(c){var e=this,g,d=c.files[0],b=c.multipart||!a.support.xhrFileUpload,f=a.type(c.paramName)==="array"?c.paramName[0]:c.paramName;c.headers=a.extend({},c.headers);if(c.contentRange){c.headers["Content-Range"]=c.contentRange}if(!b||c.blob||!this._isInstanceOf("File",d)){c.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"'}if(!b){c.contentType=d.type||"application/octet-stream";c.data=c.blob||d}else{if(a.support.xhrFormDataFileUpload){if(c.postMessage){g=this._getFormData(c);if(c.blob){g.push({name:f,value:c.blob})}else{a.each(c.files,function(h,i){g.push({name:(a.type(c.paramName)==="array"&&c.paramName[h])||f,value:i})})}}else{if(e._isInstanceOf("FormData",c.formData)){g=c.formData}else{g=new FormData();a.each(this._getFormData(c),function(h,i){g.append(i.name,i.value)})}if(c.blob){g.append(f,c.blob,d.name)}else{a.each(c.files,function(h,i){if(e._isInstanceOf("File",i)||e._isInstanceOf("Blob",i)){g.append((a.type(c.paramName)==="array"&&c.paramName[h])||f,i,i.uploadName||i.name)}})}}c.data=g}}c.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b);if(b.redirect&&c&&c!==location.host){b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})}},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}if(b.postMessage){b.dataType="postmessage "+(b.dataType||"")}}else{this._initIframeSettings(b)}},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;if(!d){d=[];c.each(function(){var e=a(this),f=e.prop("name")||"files[]",g=(e.prop("files")||[1]).length;while(g){d.push(f);g-=1}});if(!d.length){d=[c.prop("name")||"files[]"]}}else{if(!a.isArray(d)){d=[d]}}return d},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"));if(!b.form.length){b.form=a(this.options.fileInput.prop("form"))}}b.paramName=this._getParamName(b);if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||(a.type(b.form.prop("method"))==="string"&&b.form.prop("method"))||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"&&b.type!=="PATCH"){b.type="POST"}if(!b.formAcceptCharset){b.formAcceptCharset=b.form.attr("accept-charset")}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_getDeferredState:function(b){if(b.state){return b.state()}if(b.isResolved()){return"resolved"}if(b.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var b=a.Deferred(),f=b.promise();d=d||this.options.context||f;if(e===true){b.resolveWith(d,c)}else{if(e===false){b.rejectWith(d,c)}}f.abort=b.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(f,d){var c=this,b=function(e){return a.Deferred().resolveWith(c,e).promise()};d.process=function(g,e){if(g||e){d._processQueue=this._processQueue=(this._processQueue||b([this])).pipe(function(){if(d.errorThrown){return a.Deferred().rejectWith(c,[d]).promise()}return b(arguments)}).pipe(g,e)}return this._processQueue||b([this])};d.submit=function(){if(this.state()!=="pending"){d.jqXHR=this.jqXHR=(c._trigger("submit",a.Event("submit",{delegatedEvent:f}),this)!==false)&&c._onSend(f,this)}return this.jqXHR||c._getXHRPromise()};d.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";c._trigger("fail",null,this);return c._getXHRPromise(false)};d.state=function(){if(this.jqXHR){return c._getDeferredState(this.jqXHR)}if(this._processQueue){return c._getDeferredState(this._processQueue)}};d.processing=function(){return !this.jqXHR&&this._processQueue&&c._getDeferredState(this._processQueue)==="pending"};d.progress=function(){return this._progress};d.response=function(){return this._response}},_getUploadedBytes:function(d){var b=d.getResponseHeader("Range"),e=b&&b.split("-"),c=e&&e.length>1&&parseInt(e[1],10);return c&&c+1},_chunkedUpload:function(m,g){m.uploadedBytes=m.uploadedBytes||0;var f=this,d=m.files[0],e=d.size,b=m.uploadedBytes,c=m.maxChunkSize||e,i=this._blobSlice,j=a.Deferred(),l=j.promise(),h,k;if(!(this._isXHRUpload(m)&&i&&(b||c<e))||m.data){return false}if(g){return true}if(b>=e){d.error=m.i18n("uploadedBytes");return this._getXHRPromise(false,m.context,[null,"error",d.error])}k=function(){var p=a.extend({},m),n=p._progress.loaded;p.blob=i.call(d,b,b+c,d.type);p.chunkSize=p.blob.size;p.contentRange="bytes "+b+"-"+(b+p.chunkSize-1)+"/"+e;f._initXHRData(p);f._initProgressListener(p);h=((f._trigger("chunksend",null,p)!==false&&a.ajax(p))||f._getXHRPromise(false,p.context)).done(function(o,r,q){b=f._getUploadedBytes(q)||(b+p.chunkSize);if(n+p.chunkSize-p._progress.loaded){f._onProgress(a.Event("progress",{lengthComputable:true,loaded:b-p.uploadedBytes,total:b-p.uploadedBytes}),p)}m.uploadedBytes=p.uploadedBytes=b;p.result=o;p.textStatus=r;p.jqXHR=q;f._trigger("chunkdone",null,p);f._trigger("chunkalways",null,p);if(b<e){k()}else{j.resolveWith(p.context,[o,r,q])}}).fail(function(o,r,q){p.jqXHR=o;p.textStatus=r;p.errorThrown=q;f._trigger("chunkfail",null,p);f._trigger("chunkalways",null,p);j.rejectWith(p.context,[o,r,q])})};this._enhancePromise(l);l.abort=function(){return h.abort()};k();return l},_beforeSend:function(c,b){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(b,g,f,d){var e=d._progress.total,c=d._response;if(d._progress.loaded<e){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:e,total:e}),d)}c.result=d.result=b;c.textStatus=d.textStatus=g;c.jqXHR=d.jqXHR=f;this._trigger("done",null,d)},_onFail:function(d,f,e,c){var b=c._response;if(c.recalculateProgress){this._progress.loaded-=c._progress.loaded;this._progress.total-=c._progress.total}b.jqXHR=c.jqXHR=d;b.textStatus=c.textStatus=f;b.errorThrown=c.errorThrown=e;this._trigger("fail",null,c)},_onAlways:function(d,e,c,b){this._trigger("always",null,b)},_onSend:function(h,f){if(!f.submit){this._addConvenienceMethods(h,f)}var g=this,j,b,i,c,k=g._getAJAXSettings(f),d=function(){g._sending+=1;k._bitrateTimer=new g._BitrateTimer();j=j||(((b||g._trigger("send",a.Event("send",{delegatedEvent:h}),k)===false)&&g._getXHRPromise(false,k.context,b))||g._chunkedUpload(k)||a.ajax(k)).done(function(e,m,l){g._onDone(e,m,l,k)}).fail(function(e,m,l){g._onFail(e,m,l,k)}).always(function(m,n,l){g._onAlways(m,n,l,k);g._sending-=1;g._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>g._sending){var e=g._slots.shift();while(e){if(g._getDeferredState(e)==="pending"){e.resolve();break}e=g._slots.shift()}}if(g._active===0){g._trigger("stop")}});return j};this._beforeSend(h,k);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){i=a.Deferred();this._slots.push(i);c=i.pipe(d)}else{this._sequence=this._sequence.pipe(d,d);c=this._sequence}c.abort=function(){b=[undefined,"abort","abort"];if(!j){if(i){i.rejectWith(k.context,b)}return d()}return j.abort()};return this._enhancePromise(c)}return d()},_onAdd:function(p,l){var o=this,u=true,t=a.extend({},this.options,l),d=l.files,r=d.length,f=t.limitMultiFileUploads,h=t.limitMultiFileUploadSize,s=t.limitMultiFileUploadSizeOverhead,n=0,m=this._getParamName(t),c,b,q,k,g=0;if(h&&(!r||d[0].size===undefined)){h=undefined}if(!(t.singleFileUploads||f||h)||!this._isXHRUpload(t)){q=[d];c=[m]}else{if(!(t.singleFileUploads||h)&&f){q=[];c=[];for(k=0;k<r;k+=f){q.push(d.slice(k,k+f));b=m.slice(k,k+f);if(!b.length){b=m}c.push(b)}}else{if(!t.singleFileUploads&&h){q=[];c=[];for(k=0;k<r;k=k+1){n+=d[k].size+s;if(k+1===r||((n+d[k+1].size+s)>h)||(f&&k+1-g>=f)){q.push(d.slice(g,k+1));b=m.slice(g,k+1);if(!b.length){b=m}c.push(b);g=k+1;n=0}}}else{c=m}}}l.originalFiles=d;a.each(q||d,function(e,i){var j=a.extend({},l);j.files=q?i:[i];j.paramName=c[e];o._initResponseObject(j);o._initProgressObject(j);o._addConvenienceMethods(p,j);u=o._trigger("add",a.Event("add",{delegatedEvent:p}),j);return u});return u},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();a.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e});if(b[0]===this.element[0]){this.element=c}},_handleFileTreeEntry:function(f,g){var e=this,b=a.Deferred(),c=function(h){if(h&&!h.entry){h.entry=f}b.resolve([h])},d;g=g||"";if(f.isFile){if(f._file){f._file.relativePath=g;b.resolve(f._file)}else{f.file(function(h){h.relativePath=g;b.resolve(h)},c)}}else{if(f.isDirectory){d=f.createReader();d.readEntries(function(h){e._handleFileTreeEntries(h,g+f.name+"/").done(function(i){b.resolve(i)}).fail(c)},c)}else{b.resolve([])}}return b.promise()},_handleFileTreeEntries:function(b,d){var c=this;return a.when.apply(a,a.map(b,function(e){return c._handleFileTreeEntry(e,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(c){c=c||{};var b=c.items;if(b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)){return this._handleFileTreeEntries(a.map(b,function(e){var d;if(e.webkitGetAsEntry){d=e.webkitGetAsEntry();if(d){d._file=e.getAsFile()}return d}return e.getAsEntry()}))}return a.Deferred().resolve(a.makeArray(c.files)).promise()},_getSingleFileInputFiles:function(d){d=a(d);var b=d.prop("webkitEntries")||d.prop("entries"),c,e;if(b&&b.length){return this._handleFileTreeEntries(b)}c=a.makeArray(d.prop("files"));if(!c.length){e=d.prop("value");if(!e){return a.Deferred().resolve([]).promise()}c=[{name:e.replace(/^.*\\/,"")}]}else{if(c[0].name===undefined&&c[0].fileName){a.each(c,function(f,g){g.name=g.fileName;g.size=g.fileSize})}}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){if(!(b instanceof a)||b.length===1){return this._getSingleFileInputFiles(b)}return a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(d){var b=this,c={fileInput:a(d.target),form:a(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger("change",a.Event("change",{delegatedEvent:d}),c)!==false){b._onAdd(d,c)}})},_onPaste:function(d){var b=d.originalEvent&&d.originalEvent.clipboardData&&d.originalEvent.clipboardData.items,c={files:[]};if(b&&b.length){a.each(b,function(e,g){var f=g.getAsFile&&g.getAsFile();if(f){c.files.push(f)}});if(this._trigger("paste",a.Event("paste",{delegatedEvent:d}),c)!==false){this._onAdd(d,c)}}},_onDrop:function(f){f.dataTransfer=f.originalEvent&&f.originalEvent.dataTransfer;var b=this,d=f.dataTransfer,c={};if(d&&d.files&&d.files.length){f.preventDefault();this._getDroppedFiles(d).always(function(e){c.files=e;if(b._trigger("drop",a.Event("drop",{delegatedEvent:f}),c)!==false){b._onAdd(f,c)}})}},_onDragOver:function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var b=c.dataTransfer;if(b&&a.inArray("Files",b.types)!==-1&&this._trigger("dragover",a.Event("dragover",{delegatedEvent:c}))!==false){c.preventDefault();b.dropEffect="copy"}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(a.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;if(d){this._destroyEventHandlers()}this._super(b,c);if(d){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(b.fileInput instanceof a)){b.fileInput=a(b.fileInput)}}if(!(b.dropZone instanceof a)){b.dropZone=a(b.dropZone)}if(!(b.pasteZone instanceof a)){b.pasteZone=a(b.pasteZone)}},_getRegExp:function(d){var c=d.split("/"),b=c.pop();c.shift();return new RegExp(c.join("/"),b)},_isRegExpOption:function(b,c){return b!=="url"&&a.type(c)==="string"&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var c=this,b=this.options,d=a(this.element[0].cloneNode(false));a.each(d.data(),function(e,f){var g="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(d.attr(g)){if(c._isRegExpOption(e,f)){f=c._getRegExp(f)}b[e]=f}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(c){var b=this;if(!c||this.options.disabled){return}if(c.fileInput&&!c.files){this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b._onAdd(null,c)})}else{c.files=a.makeArray(c.files);this._onAdd(null,c)}},send:function(f){if(f&&!this.options.disabled){if(f.fileInput&&!f.files){var d=this,b=a.Deferred(),g=b.promise(),c,e;g.abort=function(){e=true;if(c){return c.abort()}b.reject(null,"abort","abort");return g};this._getFileInputFiles(f.fileInput).always(function(h){if(e){return}if(!h.length){b.reject();return}f.files=h;c=d._onSend(null,f).then(function(i,k,j){b.resolve(i,k,j)},function(i,k,j){b.reject(i,k,j)})});return this._enhancePromise(g)}f.files=a.makeArray(f.files);if(f.files.length){return this._onSend(null,f)}}return this._getXHRPromise(false,f&&f.context)}})}));


(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],a)}else{a(window.jQuery)}}(function(a){var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(f,c){var d=a(this);c.process(function(){return d.fileupload("process",c)});b.call(this,f,c)}},processActions:{},_processFile:function(g,f){var e=this,c=a.Deferred().resolveWith(e,[g]),d=c.promise();this._trigger("process",null,g);a.each(g.processQueue,function(h,j){var k=function(i){if(f.errorThrown){return a.Deferred().rejectWith(e,[f]).promise()}return e.processActions[j.action].call(e,i,j)};d=d.pipe(k,j.always&&k)});d.done(function(){e._trigger("processdone",null,g);e._trigger("processalways",null,g)}).fail(function(){e._trigger("processfail",null,g);e._trigger("processalways",null,g)});return d},_transformProcessQueue:function(c){var d=[];a.each(c.processQueue,function(){var e={},g=this.action,f=this.prefix===true?g:this.prefix;a.each(this,function(h,i){if(a.type(i)==="string"&&i.charAt(0)==="@"){e[h]=c[i.slice(1)||(f?f+h.charAt(0).toUpperCase()+h.slice(1):h)]}else{e[h]=i}});d.push(e)});c.processQueue=d},processing:function(){return this._processing},process:function(e){var d=this,c=a.extend({},this.options,e);if(c.processQueue&&c.processQueue.length){this._transformProcessQueue(c);if(this._processing===0){this._trigger("processstart")}a.each(e.files,function(f){var h=f?a.extend({},c):c,g=function(){if(e.errorThrown){return a.Deferred().rejectWith(d,[e]).promise()}return d._processFile(h,e)};h.index=f;d._processing+=1;d._processingQueue=d._processingQueue.pipe(g,g).always(function(){d._processing-=1;if(d._processing===0){d._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=a.Deferred().resolveWith(this).promise()}})}));


(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:true,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:false,imageCrop:false,disableImageResize:true,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:true,previewThumbnail:true,previewCrop:false,previewCanvas:true},processActions:{loadImage:function(g,d){if(d.disabled){return g}var f=this,e=g.files[g.index],c=a.Deferred();if((a.type(d.maxFileSize)==="number"&&e.size>d.maxFileSize)||(d.fileTypes&&!d.fileTypes.test(e.type))||!b(e,function(h){if(h.src){g.img=h}c.resolveWith(f,[g])},d)){return g}return c.promise()},resizeImage:function(h,e){if(e.disabled||!(h.canvas||h.img)){return h}e=a.extend({canvas:true},e);var f=this,c=a.Deferred(),d=(e.canvas&&h.canvas)||h.img,g=function(j){if(j&&(j.width!==d.width||j.height!==d.height||e.forceResize)){h[j.getContext?"canvas":"img"]=j}h.preview=j;c.resolveWith(f,[h])},i;if(h.exif){if(e.orientation===true){e.orientation=h.exif.get("Orientation")}if(e.thumbnail){i=h.exif.get("Thumbnail");if(i){b(i,g,e);return c.promise()}}if(h.orientation){delete e.orientation}else{h.orientation=e.orientation}}if(d){g(b.scale(d,e));return c.promise()}return h},saveImage:function(g,d){if(!g.canvas||d.disabled){return g}var f=this,e=g.files[g.index],c=a.Deferred();if(g.canvas.toBlob){g.canvas.toBlob(function(h){if(!h.name){if(e.type===h.type){h.name=e.name}else{if(e.name){h.name=e.name.replace(/\..+$/,"."+h.type.substr(6))}}}if(e.type!==h.type){delete g.imageHead}g.files[g.index]=h;c.resolveWith(f,[g])},d.type||e.type,d.quality)}else{return g}return c.promise()},loadImageMetaData:function(f,d){if(d.disabled){return f}var e=this,c=a.Deferred();b.parseMetaData(f.files[f.index],function(g){a.extend(f,g);c.resolveWith(e,[f])},d);return c.promise()},saveImageMetaData:function(f,d){if(!(f.imageHead&&f.canvas&&f.canvas.toBlob&&!d.disabled)){return f}var e=f.files[f.index],c=new Blob([f.imageHead,this._blobSlice.call(e,20)],{type:e.type});c.name=e.name;f.files[f.index]=c;return f},setImage:function(d,c){if(d.preview&&!c.disabled){d.files[d.index][c.name||"preview"]=d.preview}return d},deleteImageReferences:function(d,c){if(!c.disabled){delete d.img;delete d.canvas;delete d.preview;delete d.imageHead}return d}}})}));


(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:true,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(g,d){if(d.disabled){return g}var e=g.files[g.index],c,f;if(this._audioElement.canPlayType&&this._audioElement.canPlayType(e.type)&&(a.type(d.maxFileSize)!=="number"||e.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(e.type))){c=b.createObjectURL(e);if(c){f=this._audioElement.cloneNode(false);f.src=c;f.controls=true;g.audio=f;return g}}return g},setAudio:function(d,c){if(d.audio&&!c.disabled){d.files[d.index][c.name||"preview"]=d.audio}return d}}})}));


(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","./jquery.fileupload-process"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:true,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(g,d){if(d.disabled){return g}var e=g.files[g.index],c,f;if(this._videoElement.canPlayType&&this._videoElement.canPlayType(e.type)&&(a.type(d.maxFileSize)!=="number"||e.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(e.type))){c=b.createObjectURL(e);if(c){f=this._videoElement.cloneNode(false);f.src=c;f.controls=true;g.video=f;return g}}return g},setVideo:function(d,c){if(d.video&&!c.disabled){d.files[d.index][c.name||"preview"]=d.video}return d}}})}));

/*
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload-process"],a)}else{a(window.jQuery)}}(function(a){a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:true,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"超过最大文件数",acceptFileTypes:"不支持的格式",maxFileSize:"文件过大",minFileSize:"文件过小"}},processActions:{validate:function(h,e){if(e.disabled){return h}var c=a.Deferred(),g=this.options,f=h.files[h.index],b;if(e.minFileSize||e.maxFileSize){b=f.size}if(a.type(e.maxNumberOfFiles)==="number"&&(g.getNumberOfFiles()||0)+h.files.length>e.maxNumberOfFiles){f.error=g.i18n("maxNumberOfFiles")}else{if(f.size>1073741824){f.error="附件大小不能超过1G"}else{if(e.acceptFileTypes&&!(e.acceptFileTypes.test(f.type)||e.acceptFileTypes.test(f.name))){f.error=g.i18n("acceptFileTypes")}else{if(b>e.maxFileSize){f.error=g.i18n("maxFileSize")}else{if(a.type(b)==="number"&&b<e.minFileSize){f.error=g.i18n("minFileSize")}else{if(f.name){var d=f.name.substring(0,f.name.indexOf("."));if(d.length>48){f.error=a.i18n.prop("JC_SYS_075")}var i=RegExp(/[(\^)(\&)(\\)(\;)(\:)(\')(\")(\,)(\.)(\/)(\?)]+/);if(i.test(d)){f.error=a.i18n.prop("JC_SYS_109")}}else{delete f.error}}}}}}if(f.error||h.files.error){h.files.error=true;c.rejectWith(this,[h])}else{c.resolveWith(this,[h])}return c.promise()}}})}));
*/

(function(a){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],a)}else{a(window.jQuery,window.tmpl)}}(function(b,a){b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(c){if(c.result&&b.isArray(c.result.files)){return c.result.files}return[]},add:function(h,f){if(h.isDefaultPrevented()){return false}var g=b(this),d=g.data("blueimp-fileupload")||g.data("fileupload"),c=d.options;f.context=d._renderUpload(f.files).data("data",f).addClass("processing");c.filesContainer[c.prependFiles?"prepend":"append"](f.context);d._forceReflow(f.context);d._transition(f.context);f.process(function(){return g.fileupload("process",f)}).always(function(){f.context.each(function(e){b(this).find(".size").text(d._formatFileSize(f.files[e].size))}).removeClass("processing");d._renderPreviews(f)}).done(function(){f.context.find(".start").prop("disabled",false);if((d._trigger("added",h,f)!==false)&&(c.autoUpload||f.autoUpload)&&f.autoUpload!==false){f.submit()}}).fail(function(){if(f.files.error){f.context.each(function(i){var e=f.files[i].error;if(e){b(this).find(".error").text(e)}})}})},send:function(f,d){if(f.isDefaultPrevented()){return false}var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");if(d.context&&d.dataType&&d.dataType.substr(0,6)==="iframe"){d.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return c._trigger("sent",f,d)},done:function(j,i){if(j.isDefaultPrevented()){return false}var h=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=i.getFilesFromResponse||h.options.getFilesFromResponse,g=d(i),f,c;if(i.context){i.context.each(function(e){var k=g[e]||{error:"Empty file upload result"};c=h._addFinishedDeferreds();h._transition(b(this)).done(function(){var l=b(this);f=h._renderDownload([k]).replaceAll(l);h._forceReflow(f);h._transition(f).done(function(){i.context=b(this);h._trigger("completed",j,i);h._trigger("finished",j,i);c.resolve()})})})}else{f=h._renderDownload(g)[h.options.prependFiles?"prependTo":"appendTo"](h.options.filesContainer);h._forceReflow(f);c=h._addFinishedDeferreds();h._transition(f).done(function(){i.context=b(this);h._trigger("completed",j,i);h._trigger("finished",j,i);c.resolve()})}},fail:function(h,g){if(h.isDefaultPrevented()){return false}var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d,c;if(g.context){g.context.each(function(e){if(g.errorThrown!=="abort"){var i=g.files[e];i.error=i.error||g.errorThrown||true;c=f._addFinishedDeferreds();f._transition(b(this)).done(function(){var j=b(this);d=f._renderDownload([i]).replaceAll(j);f._forceReflow(d);f._transition(d).done(function(){g.context=b(this);f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})})}else{c=f._addFinishedDeferreds();f._transition(b(this)).done(function(){b(this).remove();f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})}})}else{if(g.errorThrown!=="abort"){g.context=f._renderUpload(g.files)[f.options.prependFiles?"prependTo":"appendTo"](f.options.filesContainer).data("data",g);f._forceReflow(g.context);c=f._addFinishedDeferreds();f._transition(g.context).done(function(){g.context=b(this);f._trigger("failed",h,g);f._trigger("finished",h,g);c.resolve()})}else{f._trigger("failed",h,g);f._trigger("finished",h,g);f._addFinishedDeferreds().resolve()}}},progress:function(f,d){if(f.isDefaultPrevented()){return false}var c=Math.floor(d.loaded/d.total*100);if(d.context){d.context.each(function(){b(this).find(".progress").attr("aria-valuenow",c).children().first().css("width",c+"%")})}},progressall:function(h,f){if(h.isDefaultPrevented()){return false}var g=b(this),d=Math.floor(f.loaded/f.total*100),c=g.find(".fileupload-progress"),i=c.find(".progress-extended");if(i.length){i.html((g.data("blueimp-fileupload")||g.data("fileupload"))._renderExtendedProgress(f))}c.find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")},start:function(d){if(d.isDefaultPrevented()){return false}var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c._resetFinishedDeferreds();c._transition(b(this).find(".fileupload-progress")).done(function(){c._trigger("started",d)})},stop:function(f){if(f.isDefaultPrevented()){return false}var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),c=d._addFinishedDeferreds();b.when.apply(b,d._getFinishedDeferreds()).done(function(){d._trigger("stopped",f)});d._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");b(this).find(".progress-extended").html("&nbsp;");c.resolve()})},processstart:function(c){if(c.isDefaultPrevented()){return false}b(this).addClass("fileupload-processing")},processstop:function(c){if(c.isDefaultPrevented()){return false}b(this).removeClass("fileupload-processing")},destroy:function(h,g){if(h.isDefaultPrevented()){return false}var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),i=function(){f._transition(g.context).done(function(){b(this).remove();f._trigger("destroyed",h,g)})};var c=b("#islogicDel").val();var j=b("#delattachIds").val();var d=b(h.currentTarget).closest(".fade").find("input[name='fileid']").val();if(c=="1"){if(j==""||j==null){b("#delattachIds").val(d)}else{b("#delattachIds").val(j+","+d)}i();return}if(g.url){g.dataType=g.dataType||f.options.dataType;b.ajax(g).done(i).fail(function(){f._trigger("destroyfailed",h,g)})}else{i()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){if(!c){c=b.Deferred()}this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var f=b(this),d=f.prop("href"),c=f.prop("download"),e="application/octet-stream";f.bind("dragstart",function(g){try{g.originalEvent.dataTransfer.setData("DownloadURL",[e,c,d].join(":"))}catch(h){}})},_formatFileSize:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" GB"}if(c>=1000000){return(c/1000000).toFixed(2)+" MB"}return(c/1000).toFixed(2)+" KB"},_formatBitrate:function(c){if(typeof c!=="number"){return""}if(c>=1000000000){return(c/1000000000).toFixed(2)+" Gbit/s"}if(c>=1000000){return(c/1000000).toFixed(2)+" Mbit/s"}if(c>=1000){return(c/1000).toFixed(2)+" kbit/s"}return c.toFixed(2)+" bit/s"},_formatTime:function(d){var c=new Date(d*1000),e=Math.floor(d/86400);e=e?e+"d ":"";return e+("0"+c.getUTCHours()).slice(-2)+":"+("0"+c.getUTCMinutes()).slice(-2)+":"+("0"+c.getUTCSeconds()).slice(-2)},_formatPercentage:function(c){return(c*100).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime((c.total-c.loaded)*8/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_renderTemplate:function(e,d){if(!e){return b()}var c=e({files:d,formatFileSize:this._formatFileSize,options:this.options});if(c instanceof b){return c}return b(this.options.templatesContainer).html(c).children()},_renderPreviews:function(c){c.context.find(".preview").each(function(d,e){b(e).append(c.files[d].preview)})},_renderUpload:function(c){return this._renderTemplate(this.options.uploadTemplate,c)},_renderDownload:function(c){return this._renderTemplate(this.options.downloadTemplate,c).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(h){var c=this.options;h.preventDefault();var d=b(h.currentTarget),f=d.closest("."+c.uploadTemplateId),g=f.data("data");d.prop("disabled",true);if(g&&g.submit){g.submit()}},_cancelHandler:function(g){var c=this.options;g.preventDefault();var d=b(g.currentTarget).closest("."+c.uploadTemplateId+",."+c.downloadTemplateId),f=d.data("data")||{};f.context=f.context||d;if(f.abort){f.abort()}else{f.errorThrown="abort";this._trigger("fail",g,f)}},_deleteHandler:function(g){var d=this.options;g.preventDefault();var f=b(g.currentTarget);var c=this;msgBox.confirm({content:b.i18n.prop("JC_SYS_034"),success:function(){c._trigger("destroy",g,b.extend({context:f.closest("."+d.downloadTemplateId),type:"DELETE"},f.data()))}})},_deleteHandlers:function(g){var d=this.options;g.preventDefault();var f=b(g.currentTarget);var c=this;c._trigger("destroy",g,b.extend({context:f.closest("."+d.downloadTemplateId),type:"DELETE"},f.data()))},_forceReflow:function(c){return b.support.transition&&c.length&&c[0].offsetWidth},_transition:function(d){var c=b.Deferred();if(b.support.transition&&d.hasClass("fade")&&d.is(":visible")){d.bind(b.support.transition.end,function(f){if(f.target===d[0]){d.unbind(b.support.transition.end);c.resolveWith(d)}}).toggleClass("in")}else{d.toggleClass("in");c.resolveWith(d)}return c},_initButtonBarEventHandlers:function(){var c=this.options;var d=this.element.find(".fileupload-buttonbar"),e=this.options.filesContainer;this._on(d.find(".start"),{click:function(f){f.preventDefault();if(e.find(".start").length==0){msgBox.tip({content:b.i18n.prop("JC_SYS_076")})}e.find(".start").click()}});this._on(d.find(".cancel"),{click:function(f){f.preventDefault();if(e.find(".start").length==0){msgBox.tip({content:b.i18n.prop("JC_SYS_077")})}e.find(".cancel").click()}});this._on(d.find(".deletes"),{click:function(f){f.preventDefault();if(e.find(".toggle:checked").length==0){msgBox.tip({content:b.i18n.prop("JC_SYS_061")});return}msgBox.confirm({content:b.i18n.prop("JC_SYS_034"),success:function(){e.find(".toggle:checked").closest("."+c.downloadTemplateId).find(".deletes").click();d.find(".toggle").prop("checked",false);b(document).find(".allnewtoggle").prop("checked",false)}})}});this._on(d.find(".toggle"),{change:function(f){e.find(".toggle").prop("checked",b(f.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler,"click .deletes":this._deleteHandlers});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var c=this.options;c.templatesContainer=this.document[0].createElement(c.filesContainer.prop("nodeName"));if(a){if(c.uploadTemplateId){c.uploadTemplate=a(c.uploadTemplateId)}if(c.downloadTemplateId){c.downloadTemplate=a(c.downloadTemplateId)}}},_initFilesContainer:function(){var c=this.options;if(c.filesContainer===undefined){c.filesContainer=this.element.find(".files")}else{if(!(c.filesContainer instanceof b)){c.filesContainer=b(c.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!b.support.fileInput){this._disableFileInputButton()}},enable:function(){var c=false;if(this.options.disabled){c=true}this._super();if(c){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));

/**
 * main.js

$(function(){var a=$("#businessId").val();var b=$("#businessTable").val();$("#fileupload").fileupload({url:getRootPath()+"/content/attach/upload.action",maxNumberOfFiles:100});$("#fileupload").fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s"));if(window.location.hostname==="blueimp.github.io"){$("#fileupload").fileupload("option",{url:"//jquery-file-upload.appspot.com/",disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),maxFileSize:5000000,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i});if($.support.cors){$.ajax({url:"//jquery-file-upload.appspot.com/",type:"HEAD"}).fail(function(){$('<div class="alert alert-danger"/>').text("Upload server currently unavailable - "+new Date()).appendTo("#fileupload")})}}else{$("#fileupload").addClass("fileupload-processing");$.ajax({url:$("#fileupload").fileupload("option","url"),data:{businessId:a,businessTable:b,isPaged:"1"},dataType:"json",context:$("#fileupload")[0]}).always(function(){$(this).removeClass("fileupload-processing")}).done(function(c){$(this).fileupload("option","done").call(this,$.Event("done"),{result:c})})}});
 */